import{a as w}from "./chunk-6ZDRUQ65.js";import{a as P}from "./chunk-LXZVEW4E.js";import{a as J}from "./chunk-RB3EWRZX.js";import{$ as h,A as r,E as c,H as B,J as m,L as g,N as p,O as v,P as y,Q as C,R as o,S as n,T as f,U as O,V as R,W as u,X as U,Y as b,Z as z,_ as a,a as T,aa as x,b as j,ba as M,da as Q,ea as $,ha as _,la as V,m as A,p as d,qa as H,r as F,s as N,sa as W,ua as S,va as G,w as k}from "./chunk-54NRRIHP.js";var Y=[[["title"]],[["description"]],[["footer"]]],Z=["title","description","footer"];function ee(e, i){if(e&1){let t=O();o(0,"button",8),R("click",function(){F(t);let l=u();return N(l.onDelete(l.id()))}),a(1," Usu\u0144 "),n()}}var I=class e{service=d(w);#e=d(P);authenticated=_(()=>this.#e.authenticated());loggedUser=this.#e.user;id=k.required();author=k();onDelete(i){i&&this.service.deleteById(i).subscribe(()=>this.service.loadPosts().reload())}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=c({type:e,selectors:[["app-post-card"]],inputs:{id:[1,"id"],author:[1,"author"]},ngContentSelectors:Z,decls:12,vars:3,consts:[[1,"flex","flex-col","lg:min-h-80","min-h-60","gap-4","overflow-y-hidden","text-ellipsis","bg-secondary","p-4","rounded"],[1,"text-neutral-dark","text-2xl","font-semibold"],[1,"flex","flex-col","justify-between","text-neutral-light","overflow-y-hidden","border","text-tertiary","border-tertiary","border-2","grow-1","rounded","p-4"],[1,"text-accent","cursor-pointer",3,"routerLink"],[1,"flex","items-center","justify-between"],[1,"text-neutral-dark","text-xs","font-semibold"],[1,"flex","gap-2"],[1,"bg-error/80","px-2","py-1","rounded"],[1,"bg-error/80","px-2","py-1","rounded",3,"click"]],template:function(t, s){if(t&1&&(U(Y),o(0,"div",0)(1,"h3",1),b(2),n(),o(3,"div",2),b(4,1),o(5,"span",3),a(6,"Czytaj wi\u0119cej..."),n()(),o(7,"footer",4)(8,"div",5),b(9,2),n(),o(10,"div",6),m(11,ee,2,0,"button",7),n()()()),t&2){let l;r(5),z("routerLink","/posty/",s.id(),""),r(6),p(s.authenticated()&&s.author()===((l=s.loggedUser())==null?null:l.username)?11:-1)}},dependencies:[S],encapsulation:2})};var D=class e{PUBLIC_URL=`${J.apiUrl}/stooqapi/public`;#e=H(()=>`${this.PUBLIC_URL}/quotes`);loadQuotes(){return this.#e}static \u0275fac=function(t){return new(t||e)};static \u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"})};var E=class e{transform(i, ...t){if(i)return Number(i).toFixed(t[0])}static \u0275fac=function(t){return new(t||e)};static \u0275pipe=B({name:"toFixed",type:e,pure:!0})};function te(e, i){e&1&&a(0," Loading... ")}function ie(e, i){e&1&&(o(0,"div",1),a(1,"B\u0142\u0105d przy wczytywaniu danych z gie\u0142dy"),n())}function ne(e, i){if(e&1&&(o(0,"div",6)(1,"span",7),a(2),n(),o(3,"span",8)(4,"span"),a(5),Q(6,"toFixed"),n(),o(7,"span",9),a(8),n(),o(9,"span",10),a(10),n()()()),e&2){let t=i.$implicit;r(2),h(t.ticker||"N/A"),r(3),h($(6,5,t.close,2)||"N/A"),r(3),h(t.symbol),r(),g("ngClass",t.changePositive?"text-green-400":"text-red-600"),r(),x(" ",t.change||"","")}}function oe(e, i){if(e&1&&(o(0,"div",2)(1,"div",3)(2,"span",4),a(3,"Symbol"),n(),o(4,"span",5),a(5,"Cena\u{1F4B8}"),n()(),y(6,ne,11,8,"div",6,v),n()),e&2){let t=u();r(6),C(t.quotesDisplay())}}var L=class e{stooqService=d(D);quotes=this.stooqService.loadQuotes();quotesDisplay=_(()=>this.quotes.value()?.map(i=>j(T({},i),{symbol:i.changePositive?"\u2197\uFE0F":i.changePositive?"":"\u2198\uFE0F"})));ngOnInit(){setInterval(()=>this.quotes.reload(),1e3*60*60)}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=c({type:e,selectors:[["app-stooq-display"]],hostAttrs:[1,"md:basis-1/4","basis-3/10"],decls:4,vars:2,consts:[[1,"md:text-[1rem]","text-md"],[1,"text-error","bg-secondary","p-8"],[1,"mx-auto","border-x-1","border-t-1","bg-tertiary/50"],[1,"grid","grid-cols-3","gap-2","bg-secondary","divide-x-1","border-b-1"],[1,"lg:p-2","cursor-default"],[1,"col-span-2","lg:p-2","p-0","cursor-default"],[1,"grid","grid-cols-3","gap-2","divide-x-1","border-b-1"],[1,"p-1"],[1,"col-span-2","sm:p-2","flex","grow-1","p-1","gap-2"],[1,"lg:block","hidden"],[1,"grow-1",3,"ngClass"]],template:function(t, s){t&1&&(o(0,"div",0),m(1,te,1,0)(2,ie,2,0,"div",1)(3,oe,8,0,"div",2),n()),t&2&&(r(),p(s.quotes.isLoading()?1:-1),r(),p(s.quotes.error()?2:3))},dependencies:[V,E],encapsulation:2})};function re(e, i){e&1&&a(0," Loading... ")}function ae(e, i){e&1&&(o(0,"div",4),a(1,"B\u0142\u0105d przy wczytywaniu post\xF3w"),n(),f(2,"app-stooq-display"))}function se(e, i){e&1&&(o(0,"div",1)(1,"p",5),a(2,"Lista post\xF3w jest obecnie pusta"),n(),f(3,"app-stooq-display"),n())}function pe(e, i){if(e&1&&(o(0,"app-post-card",7)(1,"h2",8),a(2),n(),o(3,"span",9),a(4),n(),o(5,"div",10)(6,"span"),a(7),n()()()),e&2){let t=i.$implicit;g("id",t.id)("author",t.author.username),r(2),x(" ",t.title," "),r(2),x(" ",t.subtitle," "),r(3),M("",t.author.username," | ",t.createdAt,"")}}function le(e, i){if(e&1&&(o(0,"div",2)(1,"div",6),y(2,pe,8,6,"app-post-card",7,v),n(),f(4,"app-stooq-display"),n()),e&2){let t=u();r(2),C(t.posts.value())}}var X=class e{service=d(w);#e=d(P);posts=this.service.loadPosts();ngOnInit(){this.#e.verifyAuthenticated().subscribe()}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=c({type:e,selectors:[["app-post-list"]],hostAttrs:[1,"grow-1","flex","flex-col"],decls:8,vars:3,consts:[[1,"bg-primary","grow-1","flex","flex-col","gap-4","p-8","justify-between"],[1,"flex","flex-col","gap-8","items-center"],[1,"flex","md:flex-row","flex-col","lg:gap-8","gap-3"],["routerLink","/posty/nowy","routerLinkActive","active",1,"fixed","bottom-5","right-5","sm:block","self-end","py-4","px-12","rounded","cursor-pointer","bg-accent","text-neutral-light"],[1,"text-error","bg-secondary","p-8"],[1,"text-xl","pt-20","text-center"],[1,"grid","grid-cols-1","md:grid-cols-2","2xl:grid-cols-3","gap-8","md:basis-3/4","basis-7/10"],[3,"id","author"],["ngProjectAs","title",5,["title"]],["ngProjectAs","description",5,["description"]],["ngProjectAs","footer",5,["footer"]]],template:function(t, s){if(t&1&&(o(0,"div",0),m(1,re,1,0)(2,ae,3,0)(3,se,4,0,"div",1)(4,le,5,0,"div",2),o(5,"button",3),a(6," Wstaw nowy post "),n(),f(7,"router-outlet"),n()),t&2){let l;r(),p(s.posts.isLoading()?1:-1),r(),p(s.posts.error()?2:-1),r(),p((l=s.posts.value())!=null&&l.length?4:3)}},dependencies:[I,S,G,W,L],encapsulation:2})};export{X as PostListComponent};
